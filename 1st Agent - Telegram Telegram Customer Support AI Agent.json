{
  "name": "Chat Bot Flow",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        200,
        980
      ],
      "id": "cf839eb5-53d0-4826-a9a9-0812479b99ac",
      "name": "Telegram Trigger",
      "webhookId": "0e9cbc71-61dc-4e59-bfbe-27a0418ed37e",
      "credentials": {
        "telegramApi": {
          "id": "DnDMKTLM15mHeCdd",
          "name": "Telegram account 10"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.message.text }}",
        "options": {
          "systemMessage": "=You are Mia, the official support chatbot for Myntra, India‚Äôs leading platform for fashion and lifestyle products. You assist users by answering queries strictly based on structured data from a specific Google Sheet and do not access any external information or open-ended knowledge base.\n\nüìö Knowledge Scope & Data Access\nOnly refer to the following data source:\nGoogle Document Name: Myntra Chatbot Database\n\n\nSheet 1: Order_Status_Data\n\n\nContains: order IDs, order status (confirmed, shipped, delivered, returned, canceled), tracking updates, delivery dates, refund status.\n\n\nSheet 2: Payment_Offers_Data\n\n\nContains: current bank offers, promo codes, discount eligibility criteria, UPI and wallet offers.\n\n\nYou are not allowed to answer questions that go beyond this data.\n\nüö´ Out-of-Scope Handling Instructions\nIf a query cannot be answered using the above sheets, follow these fallback rules:\nüîπ 1. If the query is Myntra-related but not covered in the sheet (e.g., return policy, account issues, wishlist, product details):\nRespond with:\n‚ÄúThis isn‚Äôt something I can help with directly. Please open the Myntra app and raise a request through the Help Center. Our support team will assist you there.‚Äù\nüîπ 2. If the query is unrelated to Myntra (e.g., questions about Flipkart, Amazon, Ajio, tech support, payments on other apps):\nRespond with:\n‚ÄúI‚Äôm here to help with Myntra-related queries only. For this request, please reach out to the relevant service provider.‚Äù\n\nüß† Behavioral Rules\nDo not invent or generalize answers.\n\n\nNever claim access to information that is not present in the provided sheets.\n\n\nAlways clarify politely if you cannot assist, and guide the user to the appropriate next step.\n\n\n\nüó£Ô∏è Tone and Personality\nFriendly, helpful, and to the point ‚Äî like a shopping-savvy assistant.\n\n\nAlways use a professional but warm tone.\n\n\nKeep answers short, structured, and informative.\n\n\n\nüìé Response Formatting\nFor order queries: mention exact order status, expected delivery, and any refund notes using data from Order_Status_Data.\n\n\nFor offers: list valid offers clearly with terms from Payment_Offers_Data.\n\n\nAvoid emojis unless contextually appropriate (e.g., greetings).\n\n\n\nüß™ Example Behaviors\nQ: ‚ÄúWhere is my order #5678?‚Äù\n üîç Search Order_Status_Data, return shipping or delivery status.\nQ: ‚ÄúIs there an offer on HDFC card today?‚Äù\n üîç Search Payment_Offers_Data, return offer and eligibility if present.\nQ: ‚ÄúCan I return a product after 10 days?‚Äù\n üì¥ Not in sheet. Respond with fallback message #1.\nQ: ‚ÄúWhat‚Äôs the return policy on Flipkart?‚Äù\n üì¥ Not related to Myntra. Respond with fallback message #2.\n\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        440,
        980
      ],
      "id": "a6a28805-9cf0-47d9-b6c0-2b95d6d29293",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        420,
        1180
      ],
      "id": "1b91466d-33bb-4936-8b9c-668b69426117",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "Hb749Zjw0TG4iOE5",
          "name": "OpenAi account 10"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.message.chat.id }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        540,
        1280
      ],
      "id": "f5753f0d-0afe-4c5c-88b1-eab08d3c96dc",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "14QNFeqtRLQ5Y6bnK99PampmOidWeeuh80n8GBB9VTSs",
          "mode": "list",
          "cachedResultName": "Myntra Chatbot Database",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/14QNFeqtRLQ5Y6bnK99PampmOidWeeuh80n8GBB9VTSs/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1202296568,
          "mode": "list",
          "cachedResultName": "Order_Status_Data",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/14QNFeqtRLQ5Y6bnK99PampmOidWeeuh80n8GBB9VTSs/edit#gid=1202296568"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.6,
      "position": [
        700,
        1280
      ],
      "id": "e5c055d7-6b54-494d-b15a-6da79abad5b3",
      "name": "Order status",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "HGGSqidDqxXFSGrF",
          "name": "Google Sheets account 7"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "14QNFeqtRLQ5Y6bnK99PampmOidWeeuh80n8GBB9VTSs",
          "mode": "list",
          "cachedResultName": "Myntra Chatbot Database",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/14QNFeqtRLQ5Y6bnK99PampmOidWeeuh80n8GBB9VTSs/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 31027283,
          "mode": "list",
          "cachedResultName": "Payment_Offers_Data",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/14QNFeqtRLQ5Y6bnK99PampmOidWeeuh80n8GBB9VTSs/edit#gid=31027283"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.6,
      "position": [
        840,
        1220
      ],
      "id": "e28c55af-2c83-4079-bbed-e5869e47b91d",
      "name": "payment offers",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "HGGSqidDqxXFSGrF",
          "name": "Google Sheets account 7"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Telegram Trigger').item.json.message.chat.id }}",
        "text": "={{ $json.output }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [
        800,
        980
      ],
      "id": "eabd88c5-01f6-458a-8677-61b1400170ce",
      "name": "Send a text message1",
      "webhookId": "87eed431-faaa-4884-8cdc-80ccd0134aa1",
      "credentials": {
        "telegramApi": {
          "id": "I0RntyXKXqIv1vp0",
          "name": "Telegram account 11"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Order status": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "payment offers": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Send a text message1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "94259ab1-240a-4bd3-8d22-33eb6a28565b",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "c834a9579367041be18612d09e6a972de2107501ab6fadb2ba4995f50a812801"
  },
  "id": "dVq3n8yew7cZUO7J",
  "tags": []
}